<section class="container max-w-screen-lg mx-auto">
  <ng-container *ngIf="(item$ |async) as item; else skeleton">

    <header class="mb-8">

      <img [src]="item.photoUrl || 'https://api.lorem.space/image?w=1293&h=256'"
           alt="picture"
           class="rounded-lg shadow-sm h-64 w-full object-cover bg-gray-200">

    </header>

    <section class="mb-4 flex items-center w-full">
      <div class="mr-2">
        <h1 class="text-2xl font-medium ">
          <span>{{item.name}}</span>
        </h1>
        <p class="text-gray-600">{{item.membersCount}} member{{item.membersCount === 1 ? '' : 's'}}</p>
      </div>

      <ng-container *ngIf="isUserAMember !== null">

        <ng-container *ngIf="isUserAMember; else joinCommunityBtn">

          <ui-button (click)="leaveCommunity()"
                     [loading]="isCommunityActionLoading"
                     variant="secondary"
                     class="ml-auto">

        <span class="flex items-center">
          <ui-icon icon="door-open"
                   sizeClass="h-5 w-5 mr-1.5"></ui-icon>
          <span class="mx-1">
            Leave
          </span>
        </span>

          </ui-button>

        </ng-container>
        <ng-template #joinCommunityBtn>

          <ui-button (click)="joinCommunity()"
                     [loading]="isCommunityActionLoading"
                     class="ml-auto"
                     variant="primary">

            <span class="flex items-center">
              <ui-icon icon="plus"
                       sizeClass="h-5 w-5"></ui-icon>
              <span class="mx-1">
                Join
              </span>
            </span>

          </ui-button>

        </ng-template>


      </ng-container>


    </section>


    <section class="flex">
      <a
        [ngClass]="{'border-green-500': selectedTab === 'discussions'}"
        [queryParams]="{tab:null}"
        [routerLink]="[]"
        class="px-3 py-0.5 mr-2 border-b-2 border-transparent"
        href="">
        Discussions
      </a>
      <a
        [queryParams]="{tab:'about'}"
        [routerLink]="[]"
        class="px-3 py-0.5 mr-2 border-b-2 border-transparent"
        href=""
        routerLinkActive="border-green-500">
        About
      </a>


    </section>
    <div class="border-b border-gray-300 -mt-px mb-4 shadow"></div>

    {{item|json}}
  </ng-container>

  <ng-template #skeleton>
    Loading..
  </ng-template>

</section>
